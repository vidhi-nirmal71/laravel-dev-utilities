<!-- Laravel 7.x to 8.83 Upgrade Documentation -->
<h2 class="text-center mb-4">Laravel 7.x to 8.83 Upgrade Documentation</h2>

<p>This document outlines the detailed steps required to upgrade a Laravel project from version <strong>7.x</strong> to <strong>8.83</strong>. The upgrade includes updates to the <code>composer.json</code> file, adjustments to key package versions, and modifications to core files like <code>Handler.php</code> for compatibility with Laravel 8.83.</p>

<h4>Why Laravel 8.83 and Not Laravel 8.*?</h4>
<p>We have specifically chosen Laravel <strong>8.83</strong> because it is the final release of the Laravel 8.x line and receives long-term support (LTS). It includes all critical bug fixes, security updates, and performance improvements.</p>
<p>Choosing this version ensures maximum compatibility with our current package ecosystem such as <code>altek/accountant</code>, <code>arcanedev/log-viewer</code>, and others. Locking to this version avoids issues from newer 8.* releases and maintains a stable, secure production codebase.</p>

<h4>1. Backup the Project and Database</h4>
<pre><code># Backup the code
cp -r laravel-adminpanel laravel-adminpanel-backup

# Or use Git
git add .
git commit -m "Backup before Laravel 8 upgrade"
git tag pre-laravel-8
git push origin dev-upgrade-7-to-8 --tags

# Backup the database
mysqldump -u youruser -p yourdatabase > db_backup.sql
</code></pre>

<h4>2. Update Laravel Version in composer.json</h4>
<p>Edit <code>composer.json</code> to:</p>
<pre><code>"laravel/framework": "^8.83"</code></pre>
<p>Also, verify compatibility of Laravel-specific packages with Laravel 8.</p>

<h4>3. Try to Update Composer Packages</h4>
<pre><code>
composer update
# If memory errors occur:
COMPOSER_MEMORY_LIMIT=-1 composer update
</code></pre>

<h4>4. Fix Package Compatibility Issues</h4>
<ul>
  <li><strong>Problem 1:</strong> Package X requires <code>laravel/framework ^7.30</code></li>
  <li><strong>Solution:</strong> <code>composer require vendor/package:^X.Y</code></li>

  <li><strong>Problem 2:</strong> Abandoned or incompatible packages</li>
  <li><strong>Solutions:</strong>
    <ul>
      <li>Check GitHub for Laravel 8 support</li>
      <li>Replace with an alternative package</li>
      <li>Temporarily remove it from <code>composer.json</code></li>
      <li>Retry <code>composer update</code></li>
    </ul>
  </li>
</ul>

<h4>5. Clear and Optimize Laravel Setup</h4>
<p>After a successful update, run:</p>
<pre><code>
php artisan config:clear
php artisan route:clear
php artisan view:clear
php artisan cache:clear
composer dump-autoload
php artisan optimize
</code></pre>

<h4>6. Handle Code Changes (e.g., Handler.php)</h4>
<p>Laravel 8 introduces changes to core files like <code>app/Exceptions/Handler.php</code>. You should:</p>
<ul>
  <li>Adjust method signatures</li>
  <li>Remove deprecated methods</li>
  <li>Add missing imports</li>
</ul>

<h4>7. Check Project Functionality</h4>
<p>Start the server:</p>
<pre><code>php artisan serve</code></pre>
<p>Ensure:</p>
<ul>
  <li>All pages load correctly</li>
  <li>Forms and submissions work</li>
  <li>Admin panel, login/logout, dashboard are functional</li>
  <li>All JS and CSS assets load properly</li>
  <li>No console or network errors</li>
</ul>

<h4>8. Run Migrations and Test Data</h4>
<pre><code>
php artisan migrate
php artisan db:seed
</code></pre>

<h4>9. Run Tests (If Available)</h4>
<pre><code>php artisan test</code></pre>
<p>Fix any failing tests.</p>

<h4>10. Final Cleanup</h4>
<pre><code>
php artisan config:cache
php artisan route:cache
php artisan view:cache

# Optional cleanup with PHP CS Fixer
vendor/bin/php-cs-fixer fix

# Commit without GrumPHP check
git commit --no-verify -m "Laravel upgraded to 8.83"
</code></pre>

<h4>Summary of Commands</h4>
<pre><code>
# Backup
cp -r laravel-adminpanel laravel-adminpanel-backup
mysqldump -u root -p dbname > backup.sql

# Update
composer update
COMPOSER_MEMORY_LIMIT=-1 composer update

# Fix packages
composer require vendor/package:^version

# Clear + optimize
php artisan config:clear
php artisan optimize
php artisan migrate
php artisan serve
php artisan test

# Commit
git commit -am "Upgraded Laravel to 8.83"
git push
</code></pre>

<h4>Composer Package Changes</h4>

<h6>1. ✅ Updated Packages:</h6>
<ul>
  <li><strong>PHP Version:</strong><br>
    Old: ^7.4 → New: ^8.0<br>
    <em>Laravel 8.x supports PHP 8.0+, offering better performance and features.</em>
  </li>
  <li><strong>altek/accountant:</strong> ^2.1 → ^3.3<br>
    <em>Upgraded for Laravel 8.x compatibility</em>
  </li>
  <li><strong>arcanedev/log-viewer:</strong> ^7.0 → ^8.0<br>
    <em>Supports Laravel 8.x changes</em>
  </li>
  <li><strong>laravel/framework:</strong> ^7.30 → ^8.83<br>
    <em>Final LTS release of Laravel 8.x</em>
  </li>
  <li><strong>nunomaduro/collision:</strong> ^4.0 → ^5.0<br>
    <em>Improved error display and Laravel 8 support</em>
  </li>
</ul>

<h6>2. ❌ Removed Packages:</h6>
<ul>
  <li><strong>facade/ignition:</strong> ^1.11<br>
    <em>Replaced by <code>nunomaduro/collision</code></em>
  </li>
  <li><strong>phpro/grumphp:</strong> ^1.0<br>
    <em>No longer compatible with Laravel 8</em
